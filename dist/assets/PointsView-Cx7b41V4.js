import{d as b,f as k,c as a,a as s,j as x,t as o,h as r,F as v,i as _,u as $,n as y,o as c,_ as C}from"./index-Bpd1Qgob.js";import{u as S}from"./userStore-MTQMhzZ6.js";const D={class:"points-container"},P={class:"nav-tabs"},w={class:"points-content"},I={class:"exchange-section"},T={class:"current-points"},V={class:"points-amount"},B={class:"exchange-items"},F={class:"item-info"},L={class:"item-price"},R=["onClick","disabled"],E={class:"points-history"},N={key:0,class:"no-records"},j={key:1,class:"records-list"},z={class:"record-info"},M={class:"record-date"},U={class:"record-description"},Y=b({__name:"PointsView",setup(q){const l=$(),i=S();function d(e){l.push(e)}const u=k(()=>[...i.pointRecords].sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()));function g(e){const t=new Date(e),n=t.getFullYear(),p=String(t.getMonth()+1).padStart(2,"0"),f=String(t.getDate()).padStart(2,"0");return`${n}-${p}-${f}`}function h(e){i.currentPoints>=e.points?confirm(`ç¡®å®šè¦èŠ±è´¹ ${e.points} ç§¯åˆ†å…‘æ¢ ${e.name} å—ï¼Ÿ`)&&i.exchangeItem(e.id)&&alert(`å…‘æ¢æˆåŠŸï¼å·²èŽ·å¾— ${e.name}`):alert("ç§¯åˆ†ä¸è¶³ï¼Œæ— æ³•å…‘æ¢")}function m(){i.logout(),localStorage.removeItem("isLoggedIn"),l.push("/")}return(e,t)=>(c(),a("div",D,[t[7]||(t[7]=s("div",{class:"decorations"},[s("div",{class:"decoration heart"}),s("div",{class:"decoration star"}),s("div",{class:"decoration circle"})],-1)),s("header",{class:"points-header"},[t[3]||(t[3]=s("h1",null,"ðŸ† æˆ‘çš„ç§¯åˆ†",-1)),s("div",{class:"logout-btn",onClick:m},"é€€å‡ºç™»å½•")]),s("div",P,[s("button",{class:"tab-btn",onClick:t[0]||(t[0]=n=>d("/tasks"))},"ä»»åŠ¡"),s("button",{class:"tab-btn active",onClick:t[1]||(t[1]=n=>d("/points"))},"ç§¯åˆ†"),s("button",{class:"tab-btn",onClick:t[2]||(t[2]=n=>d("/admin"))},"ç®¡ç†")]),s("div",w,[s("div",I,[t[5]||(t[5]=s("h2",null,"ðŸŽ ç§¯åˆ†å…‘æ¢",-1)),s("div",T,[t[4]||(t[4]=x(" å½“å‰æ‹¥æœ‰ç§¯åˆ†: ",-1)),s("span",V,o(r(i).currentPoints),1)]),s("div",B,[(c(!0),a(v,null,_(r(i).exchangeItems,n=>(c(),a("div",{key:n.id,class:"exchange-item"},[s("div",F,[s("h3",null,o(n.name),1),s("p",null,o(n.description),1),s("div",L,"éœ€è¦ "+o(n.points)+" ç§¯åˆ†",1)]),s("button",{onClick:p=>h(n),class:"exchange-btn",disabled:r(i).currentPoints<n.points},o(r(i).currentPoints<n.points?"ç§¯åˆ†ä¸è¶³":"ç«‹å³å…‘æ¢"),9,R)]))),128))])]),s("div",E,[t[6]||(t[6]=s("h2",null,"ðŸ“Š ç§¯åˆ†è®°å½•",-1)),u.value.length===0?(c(),a("div",N,"æš‚æ— ç§¯åˆ†è®°å½•")):(c(),a("div",j,[(c(!0),a(v,null,_(u.value,n=>(c(),a("div",{key:n.id,class:"record-item"},[s("div",z,[s("div",M,o(g(n.date)),1),s("div",U,o(n.description),1)]),s("div",{class:y(["record-points",n.points>0?"positive":"negative"])},o(n.points>0?"+":"")+o(n.points),3)]))),128))]))])])]))}}),H=C(Y,[["__scopeId","data-v-c2c263a1"]]);export{H as default};
